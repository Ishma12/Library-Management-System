{% extends 'employee/ebase2.html'%}
{%load static%}
{%block slidebar %}
<div class="sidebar">
    <ul>
        <li>
            <a href="{% url 'employee-eborrowedbook' %}">
                <i class="fas fa-th-large"></i>
                <div>Dashboard</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-addborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Add Borrowed Book</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-editborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Edit Borrowed Books</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-deleteborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Delete Borrowed Books</div>
            </a>
        </li>
        
        <li>
            <a href="#"onclick="confirmLogout()">
                <i class="fas fa-sign-out-alt"></i>
                <div>Logout</div>
            </a>    
        </li>
    </ul>
</div>
{% endblock %}
{%block charts %}
<div class="charts">
    <div class="add-book-box">
        <h2>Delete Borrowed Book</h2>
        <form id="deleteBorrowedBookForm">
            <div class="form-group">
                <label for="borrowedbookID">Book ID:</label>
                <input type="text" id="borrowedbookID" name="borrowedbookID" required>
            </div>
            <div class="button-group">
                <button type="button" class="add-button" onclick="deleteBorrowedBook()">Delete</button>
            </div>
        </form>
    </div>
    <button type="button" class="done-button" onclick="redirectToDashboard()">Done</button>
</div>
</div>
<script>
    function deleteBorrowedBook() {
        const formData = new FormData(document.getElementById('deleteBorrowedBookForm'));

        fetch('{% url "employee-deleteborrowedbook" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': '{{ csrf_token }}'
            },
        })
        .then(response => response.json())
        .then(data => {
            console.log(data);
            // Handle the response, you can display a success message or handle errors
        })
        .catch(error => {
            console.error('Error:', error);
        });
    }

    function redirectToDashboard() {
        window.location.href = '{% url "employee-eborrowedbook" %}';
    }
</script>

{% endblock %}