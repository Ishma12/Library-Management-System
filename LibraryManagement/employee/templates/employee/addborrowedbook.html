{% extends 'employee/ebase2.html'%}
{%load static%}
{%block slidebar %}
<div class="sidebar">
    <ul>
        <li>
            <a href="{% url 'employee-eborrowedbook' %}">
                <i class="fas fa-th-large"></i>
                <div>Dashboard</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-addborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Add Borrowed Book</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-editborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Edit Borrowed Books</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-deleteborrowedbook' %}">
                <i class="fas fa-book"></i>
                <div>Delete Borrowed Books</div>
            </a>
        </li>
        
        <li>
            <a href="#"onclick="confirmLogout()">
                <i class="fas fa-sign-out-alt"></i>
                <div>Logout</div>
            </a>    
        </li>
    </ul>
</div>
{% endblock %}
{%block charts %}
    <div class="charts">
        <div class="add-book-box">
            <h2>Add Borrowed Book</h2>
           <!-- Update the form fields to use the correct IDs -->
            <form id="addBorrowedBookForm">
                <div class="form-group">
                    <label for="borrowedbookID">Book ID:</label>
                    <input type="text" id="borrowedbookID" name="borrowedbookID" required>
                </div>
                <div class="form-group">
                    <label for="borrowedbookName">Book Name:</label>
                    <input type="text" id="borrowedbookName" name="borrowedbookName" required>
                </div>
                <div class="form-group">
                    <label for="studentID">Student ID:</label>
                    <input type="text" id="studentID" name="studentID" required>
                </div>
                <div class="form-group">
                    <label for="studentName">Student Name:</label>
                    <input type="text" id="studentName" name="studentName" required>
                </div>
                <div class="form-group">
                    <label for="borrowdate">Borrowed Date:</label>
                    <input type="date" id="borrowdate" name="borrowdate" required>
                </div>
                <div class="form-group">
                    <label for="returndate">Returned Date:</label>
                    <input type="date" id="returndate" name="returndate" required>
                </div>
                <div class="form-group">
                    <label for="fine">Fine:</label>
                    <input type="text" id="fine" name="fine" required>
                </div>
                <div class="button-group">
                    <button type="button" class="add-button" onclick="addBorrowedBook()">Add</button>
                </div>
            </form>

            </div>
                <button type="button" class="done-button" onclick="redirectToDashboard()">Done</button> <!-- Place the "Done" button here, outside the "Add Book" box -->
            </div>
        </div>
    </div>
    <script>
        function addBorrowedBook() {
            const formData = new FormData(document.getElementById('addBorrowedBookForm'));
    
            fetch('{% url "employee-addborrowedbook" %}', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': '{{ csrf_token }}'
                },
            })
            .then(response => response.json())
            .then(data => {
                // Handle the response, you can update the table or do other actions
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    
        function redirectToDashboard() {
            window.location.href = '{% url "employee-eborrowedbook" %}';
        }
    </script>
{% endblock %}