{% extends 'employee/ebase2.html'%}
{%load static%}
{%block slidebar %}
<div class="sidebar">
    <ul>
        <li>
            <a href="{% url 'employee-ebook' %}">
                <i class="fas fa-th-large"></i>
                <div>Dashboard</div>
            </a>
        </li>
        <li>
            <a href="{% url 'employee-addbook' %}">
                <i class="fas fa-books"></i>
                <div>Add Books</div>
            </a>
        </li>
        

        


        {% include "employee/logout-button.html" %}
    </ul>
</div>
{% endblock %}
{%block charts %}

<div class="charts">
    <div class="add-book-box">
        <h2>Add Book</h2>
        <form method="post"  enctype="multipart/form-data" id="addBookForm">
            {%csrf_token%}
            {% for field in form %}
            <div class="form-group">
                {{ field.errors }}
                {{ field.label_tag }} {{ field }}
                {% if field.help_text %}
                <p class="help" id="{{ field.auto_id }}_helptext">
                    {{ field.help_text|safe }}
                </p>
                {% endif %}
            </div>
            {% endfor %}
            <button type="submit" class="done-button" >Add Book</button>
        </form>
        <!-- <form id="addBookForm">
            <div class="form-group">
                <label for="bookID">Book ID:</label>
                <input type="text" id="bookID" name="bookID" required >
            </div>
            <div class="form-group">
                <label for="bookName">Book Name:</label>
                <input type="text" id="bookName" name="bookName" required>
            </div>
            <div class="form-group">
                <label for="author">Author:</label>
                <input type="text" id="author" name="author" required>
            </div>
            <div class="form-group">
                <label for="category">Category:</label>
                <input type="text" id="category" name="category" required>
            </div>
    
            <div class="button-group">
                <button type="button" class="add-button" onclick="addBook()">Add</button>
            </div>
        </form> -->
    </div>
    
</div>
</div>
<script>
    function addBook() {
        console.log('addBook function called');
        const formData = new FormData(document.getElementById('addBookForm'));

        fetch('{% url "employee-addbook" %}', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest',  // Add the header for Django to identify AJAX requests
                'X-CSRFToken': '{{ csrf_token }}'      // Add the CSRF token for security
            },
        })
            .then(response => response.json())
            .then(data => {
                // Handle the response, you can update the table or do other actions
                console.log(data);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    function redirectToDashboard() {
        window.location.href = '{% url "employee-edashboard" %}';
    }
</script>

{% endblock %}